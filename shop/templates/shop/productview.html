{% extends 'shop/base.html' %} 
{% block title %}product-view page{% endblock %}

{% block style_sheet %}
<style>

  a.add{
    background-color: rgb(52, 115, 226);
    color: white;
    border: 1px blue;
    border-radius: 8px;
  }


  a.add:hover{
    cursor: pointer;
    background-color: rgb(13, 13, 67);
  }

</style>
{% endblock %}

{% block content%}

<div class="container">
  <div class="images">
    <img
      src="{{product.image.url}}" alt="product-image"
    />
  </div>
  <div class="slideshow-buttons">
    <div class="one"></div>
    <div class="two"></div>
    <div class="three"></div>
    <div class="four"></div>
  </div>
  
  {% comment %} 
    <p class="pick">choose size</p>
    <div class="sizes">
    <div class="size">5</div>
    <div class="size">6</div>
    <div class="size">7</div>
    <div class="size">8</div>
    <div class="size">9</div>
    <div class="size">10</div>
    <div class="size">11</div>
    <div class="size">12</div>
  </div> {% endcomment %}
  <div class="product">
    <p>{{product.sub_category}}</p>
    <h1>{{product.product_name}}</h1>
    <h2 id="price">{{product.price}}</h2>
    <p class="desc">
      {{product.description}}
    </p>
    <div class="buttons">
      <a href="{% url 'shop:addtocart' product.product_id %}">Add to Cart</a>
    </div>
  </div>
</div>


<script>

    let price = document.querySelector("#price");
    price.textContent =  "INR " + new Intl.NumberFormat('en-IN').format(Number(price.textContent));

    if(localStorage.getItem("cart") === null){
      let items = {}
      localStorage.setItem("cart", JSON.stringify(items))
    }

    let item = document.querySelectorAll(".add")[0];
    item.addEventListener("click", (event) => {
      let clicked_on = item.id;
      let items = JSON.parse(localStorage.getItem("cart"))
      if(items[clicked_on] === undefined) items[clicked_on] = 1;
      else items[clicked_on] += 1
      localStorage.setItem("cart", JSON.stringify(items))
    })

</script>

{% endblock %}
